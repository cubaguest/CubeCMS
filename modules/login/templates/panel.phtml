<?
$icon = null;
if($this->panelObj()->getIcon() != null){
   $icon = '<img src="'.Panel_Obj::getIconDir().$this->panelObj()->getIcon().'" alt="'.$this->panelObj()->getIcon().'" />';
}
$backImg = null;
if($this->panelObj()->getBackImage() != null){
   $backImg = 'background-image: url(\''.Panel_Obj::getBackImgDir().$this->panelObj()->getBackImage().'\');';
}
$form = Auth::getAuthenticator('internal')->getLoginForm();
?>
<div class="name"><?=$icon?><a href="<?=$this->l();?>" title="<?=htmlspecialchars($this->panelObj()->getName())?>"><?=$this->panelObj()->getName()?></a></div>
<div class="content" style="<?=$backImg?>">
<?
$form->setAction($this->currentLink);
echo $form->renderStart();
?>
   <div>
      <? if(!Auth::isLogin()){?>
      <?=$form->{Auth_Provider_Internal::FORM_USERNAME}->label();?><br />
      <?=$form->{Auth_Provider_Internal::FORM_USERNAME}->control();?><br />
      
      <?=$form->{Auth_Provider_Internal::FORM_PASSWORD}->label();?><br />
      <?=$form->{Auth_Provider_Internal::FORM_PASSWORD}->control();?><br />
      
      <?=$form->{Auth_Provider_Internal::FORM_PERMANENT}->label();?>
      <?=$form->{Auth_Provider_Internal::FORM_PERMANENT}->control();?><br />
      
      <?=$form->{Auth_Provider_Internal::FORM_SUBMIT}->control();?>
      <? } else { ?>
      <?=$this->tr('Přihlášen')?>: <a href="<?=$this->l();?>" title="<?=htmlspecialchars($this->panelObj()->getName())?>"><?=Auth::getUserName()?></a><br />
      <input id="login_submit" type="submit" name="<?=Auth::FORM_LOGOUT?>" value="<?=$this->tr('odhlásit')?>" />
      <? } ?>
   </div>
<?=$form->renderEnd()?>
</div>