<?
$this->addCssFile("style.css");

// jquery galerka
$this->addJsPlugin(new JsPlugin_PiroBox());

?>
<div>
   <?if($this->article->{Articles_Model_Detail::COLUMN_TEXT} != null) {?>
   <div class="photogaleryMedText">
         <?=$this->article->{Articles_Model_Detail::COLUMN_TEXT}?>
   </div>
   <br />
      <?}?>

   <!-- Start Advanced Gallery Html Containers -->
   <div class="photogaleryMedImages">
      <?while ($image = $this->images->fetch()) {
         ?>
      <a class="pirobox_gall" href="<?=$this->category()->getModule()->getDataDir(true)
                    .Photogalery_Controller::DIR_MEDIUM.URL_SEPARATOR.$image[PhotoGalery_Model_Images::COLUMN_FILE]?>"
         title="<?=$image->{PhotoGalery_Model_Images::COLUMN_NAME}?>">
         <img src="<?=$this->category()->getModule()->getDataDir(true).Photogalery_Controller::DIR_SMALL.URL_SEPARATOR
                         .$image[PhotoGalery_Model_Images::COLUMN_FILE]?>" alt="<?=$image->{PhotoGalery_Model_Images::COLUMN_NAME}?>" />
      </a>
         <?}?>
   </div>
   <!-- End Gallery Html Containers -->
   <hr class="reseter" />

   <script type="text/javascript">
      /* <![CDATA[ */
      $(document).ready(function(){
         $().piroBox({
            my_speed: 300, //animation speed
            bg_alpha: 0.8, //background opacity
            radius: 4, //caption rounded corner
            scrollImage : false, // true == image follows the page _|_ false == image remains in the same open position
            // in some cases of very large images or long description could be useful.
            slideShow : 'slideshow', // true == slideshow on, false == slideshow off
            slideSpeed : 3, //slideshow
            pirobox_next : 'piro_next', // Nav buttons -> piro_next == inside piroBox , piro_next_out == outside piroBox
            pirobox_prev : 'piro_prev', // Nav buttons -> piro_prev == inside piroBox , piro_prev_out == outside piroBox
            close_all : '.piro_close' // add class .piro_overlay(with comma)if you want overlay click close piroBox
         });
      });

      /* ]]> */
   </script>
   <?
   if($this->category()->getRights()->isWritable()) {
      $toolbox = new Template_Toolbox();
      $toolbox->addTool('edit_text', $this->_("Upravit text"),
              $this->link()->route('edittext', array('urlkey' => $this->article->{Articles_Model_Detail::COLUMN_URLKEY})),
              $this->_("Upravit text galerie"), "page_edit.png");
      $toolbox->addTool('edit_images', $this->_("Upravit obrÃ¡zky"),
              $this->link()->route('editimages', array('urlkey' => $this->article->{Articles_Model_Detail::COLUMN_URLKEY})),
              $this->_("Upravit text galerie"), "image_edit.png");
      $this->includeTplObj($toolbox);
   }?>
</div>
<?$this->includeTpl("buttonback.phtml", true, array('link'=>(string)$this->l()->route('normal')));?>
