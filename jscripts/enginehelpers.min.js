function vveShowMessages(e){CubeCMS.Msg.show(e)}function infoMsg(e,t){CubeCMS.Msg.info(e,t)}function clearInfoMsg(){CubeCMS.Msg.clear("info")}function clearErrMsg(){CubeCMS.Msg.clear("error")}function errMsg(e,t){CubeCMS.Msg.err(e,t)}function showLoadBox(e){CubeCMS.Loader.showLoadBox(e)}function hideLoadBox(){CubeCMS.Loader.hideLoadBox()}function vveLoadImage(e,t){CubeCMS.Images.loadImage(e,t)}function str2url(e,t,o){return CubeCMS.Tools.str2url(e,o)}function vveCheckUrlKey(e,t,o,n){var i=$(t),a={key:i.val(),lang:i.attr("lang")};"undefined"!=typeof n&&$.extend(a,n),$.ajax({type:"POST",url:e,data:a,cache:!1,success:function(e){!o&&""==o||"undefined"==typeof o||o("undefined"!=typeof e.urlkey?e.urlkey:null)}})}var CubeCMS=CubeCMS||{};CubeCMS={contentSelector:".main-content",lang:null,primaryLang:null,domain:null,toolboxTopOffset:30,baseOpt:{},init:function(e){$.extend(this,e),document.domain=this.domain,document.lang=this.lang,document.primaryLang=this.primaryLang,CubeCMS.ToolBox.toolboxTop=this.toolboxTopOffset},setup:function(){this.Msg.init(),this.Loader.init(),this.ToolBox.init(),this.Form.init(),this.Modal.init(),this.Popup.init()}},CubeCMS.Msg={infoBox:null,errBox:null,init:function(){this.infoBox=$("#infoMessages"),this.errBox=$("#errMessages")},info:function(e,t){return null==e?this:("undefined"==typeof t&&(t=!0),1==t&&this.clear("info"),this.infoBox.prepend("<p>"+e+"</p>").slideDown(),$("body").scrollTop(this.infoBox.offset().top-50),this)},err:function(e,t){return null==e?this:("undefined"==typeof t&&(t=!0),1==t&&this.clear("err"),this.errBox.prepend("<p>"+e+"</p>").slideDown(),$("body").scrollTop(this.errBox.offset().top-50),this)},show:function(e){if(this.clear("info"),this.clear("error"),"object"==typeof e.infomsg)for(var t=0;t<e.infomsg.length;t++)this.info(e.infomsg[t],!1);else"string"==typeof e.infomsg&&this.info(e.infomsg);if("object"==typeof e.errmsg)for(var o=0;o<e.errmsg.length;o++)this.err(e.errmsg[o],!1);else"string"==typeof e.infomsg&&this.err(e.errmsg)},clear:function(e){return"info"==e?this.infoBox.html(null).hide():("err"==e||"error"==e)&&this.errBox.html(null).hide(),this}},CubeCMS.Tools={str2url:function(e,t){if(e=e.toUpperCase(),e=e.toLowerCase(),e=e.replace(/[\u0105\u0104\u00E0\u00E1\u00E2\u00E3\u00E4\u00E5]/g,"a"),e=e.replace(/[\u00E7\u010D\u0107\u0106]/g,"c"),e=e.replace(/[\u010F]/g,"d"),e=e.replace(/[\u00E8\u00E9\u00EA\u00EB\u011B\u0119\u0118]/g,"e"),e=e.replace(/[\u00EC\u00ED\u00EE\u00EF]/g,"i"),e=e.replace(/[\u0142\u0141]/g,"l"),e=e.replace(/[\u00F1\u0148]/g,"n"),e=e.replace(/[\u00F2\u00F3\u00F4\u00F5\u00F6\u00F8\u00D3]/g,"o"),e=e.replace(/[\u0159]/g,"r"),e=e.replace(/[\u015B\u015A\u0161]/g,"s"),e=e.replace(/[\u00DF]/g,"ss"),e=e.replace(/[\u0165]/g,"t"),e=e.replace(/[\u00F9\u00FA\u00FB\u00FC\u016F]/g,"u"),e=e.replace(/[\u00FD\u00FF]/g,"y"),e=e.replace(/[\u017C\u017A\u017B\u0179\u017E]/g,"z"),e=e.replace(/[\u00E6]/g,"ae"),e=e.replace(/[\u0153]/g,"oe"),e=e.replace(/[\u013E\u013A]/g,"l"),e=e.replace(/[\u0155]/g,"r"),e=e.replace(/[^a-z0-9\s\'\:\/\[\]-]/g,""),e=e.replace(/[\s\'\:\/\[\]-]+/g," "),e=e.replace(/[ ]/g,"-"),e=e.replace(/[\/]/g,"-"),1==t){var o=e.charAt(0);e=o.toUpperCase()+e.slice(1)}return e},stripHtml:function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText},checkUrlKey:function(e,t,o){var n=$(element);$.ajax({type:"POST",url:e,cache:!1,data:{key:n.val(),lang:n.attr("lang")},success:function(e){"undefined"!=typeof e.urlkey&&$.isFunction(o)&&o(e.urlkey)}})},contrastColor:function(e){var t=1-(.299*parseInt(e.substring(0,2),16)+.587*parseInt(e.substring(2,4),16)+.114*parseInt(e.substring(4,6),16))/255;return.5>t?"#000000":"#ffffff"},loadPageLang:function(e){showLoadBox(CubeCMS.contentSelector),$(CubeCMS.contentSelector).load(e,function(t){var o=e.match(/(l=[a-z]{2})/g);null!==o&&$(CubeCMS.contentSelector).html(t.replace(o[0],"")),hideLoadBox(),$(document).scroll()})},uniqID:{counter:0,get:function(e){e||(e="uniqid");var t=e+"-"+CubeCMS.Tools.uniqID.counter++;return 0===$("#"+t).length?t:CubeCMS.Tools.get(e)}},formatFileSize:function(e){var t=-1,o=[" kB"," MB"," GB"," TB","PB","EB","ZB","YB"];do e/=1024,t++;while(e>1024);return Math.max(e,.1).toFixed(1)+o[t]},getScrollBarWidth:function(){var e=document.createElement("div");e.className="scrollbar-measure",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}},CubeCMS.ToolBox={enablePageTracking:!0,toolboxTop:30,init:function(){var e=this;$(document).ajaxComplete(function(){e.initHtml(),e.initEvents(),e.initLangLoader(),e.initFixedBoxs()}),this.initHtml()},initHtml:function(){$("div.toolbox").parent("div").css({position:"relative"}),$(".toolbox").each(function(){if(!$(this).data("_ccms_loaded")){$(this).data("_ccms_loaded",!0);var e=CubeCMS.Tools.uniqID.get("toolbox");$(this).prop("id",e),$(".toolbox-button",this).prop("id",e+"-button"),$(this).children(".toolbox-tools").prop("id",e+"-tools")}}),$(".toolbox>.toolbox-tools").appendTo("body"),this.initEvents(),this.initLangLoader(),this.initFixedBoxs()},initEvents:function(){var e=this;$("body").on("mouseenter","div.toolbox",function(){var e="#"+$(this).prop("id");$(e).parent().addClass("toolbox-active-content"),console.log(e);var t=$(e+"-tools");t.css({top:$(this).offset().top-2,left:$(this).offset().left-t.outerWidth()+$(e+"-button").outerWidth()+2,right:"auto"}).fadeIn(100),$("body").on("touchstart",function(){t.trigger("mouseleave")})}),$("body").on("mouseleave","div.toolbox-tools",function(e){0===$(this).parent(".toolbox-tool").length&&("undefined"!=typeof e.fromElement&&!e.fromElement.length||"undefined"==typeof e.fromElement&&"SELECT"!==e.target.tagName)&&$(this).fadeOut(100),$("#"+$(this).prop("id").toString().replace("-tools","")).parent().removeClass("toolbox-active-content")}),$("body").on("touchstart",".toolbox-button",function(){return $(this).parent().trigger("mouseenter"),!1}),$("body").on("touchstart",".toolbox-tools *",function(e){e.stopPropagation()}),$(document).on("scroll",function(){var t=$(this).scrollTop(),o=$(".toolbox");o.each(function(){var o=$(this).parent();$(this).css(o.is(":visible")&&o.offset().top<t+e.toolboxTop&&t<o.offset().top+o.height()-e.toolboxTop-$(".toolbox-button",this).outerHeight()?{position:"fixed",top:e.toolboxTop,left:$(this).offset().left,right:"auto"}:{position:"absolute",top:3,right:3,left:"auto"})})})},initLangLoader:function(){$("body").on("click","a.toolbox-changelang-button",function(e){e.preventDefault(),CubeCMS.Loader.showLoadBox(".main-content");var t=this.href;return $(".main-content").load(t,function(e){var o=t.match(/(l=[a-z]{2})/g);null!=o&&$(".main-content").html(e.replace(o[0],"")),CubeCMS.Loader.hideLoadBox(),$(document).scroll()}),!1})},initFixedBoxs:function(){$(".fixed-actions-box").each(function(){var e=$(this);if(e.data("container")){var t=$(e.data("container")),o=e.offset().top,n=e.offset().top+t.outerHeight();$(window).on("scroll",function(){$(window).scrollTop()+30>o&&$(window).scrollTop()<n?e.hasClass("fixed-actions-box-helper")||(e.after($('<div class="fixed-actions-box-palceholder hidden"></div>').height(e.height()).width(e.width())),e.outerWidth(e.outerWidth()).addClass("fixed-actions-box-helper").css({left:e.offset().left})):(e.removeClass("fixed-actions-box-helper").css({left:"auto",width:"auto"}),e.next(".fixed-actions-box-palceholder").remove())})}})}},CubeCMS.ToolBox.Tool={init:function(){}},CubeCMS.Images={slideShowFade:function(e,t){$(e+" .image:gt(0)").hide(),setInterval(function(){$(e+" .image:first").fadeOut().next(".image").fadeIn().end().appendTo(e)},t)},loadImage:function(e,t){var o=document.createElement("img");o.onload=function(){$.isFunction(t)&&t.call(o)},o.src=e}},CubeCMS.Loader={timeout:1e4,loaderCnt:'<div id="loadingBox" class="loadingBox"><div class="loader-w"><span class="loader-text">{MSG}</span></div>',loadBoxClass:"loadingBox",init:function(){},loadUrl:function(){},showLoadBox:function(e,t){"undefined"==typeof t&&(t="loading...");var o="loadingBox-"+Math.floor(1e4*Math.random(0)),n=$(e).parent("div,p"),i=$(this.loaderCnt.replace("{MSG}",t)).addClass(this.loadBoxClass).attr("id",o).css({position:"absolute",top:0,left:0,opacity:0,width:n.width()+parseInt(n.css("padding-left"))+parseInt(n.css("padding-right"))+parseInt(n.css("margin-left"))+parseInt(n.css("margin-right")),height:n.height()+parseInt(n.css("padding-top"))+parseInt(n.css("padding-bottom"))+parseInt(n.css("margin-top"))+parseInt(n.css("margin-bottom"))});"absolute"!=n.css("position")&&"relative"!=n.css("position")&&n.css("position","relative"),n.prepend(i.hide()),i.fadeTo(500,1);var a=this;return setTimeout(function(){a.hideLoadBox(o)},this.timeout),o},hideLoadBox:function(e){"undefined"==typeof e?$("."+this.loadBoxClass).remove():e instanceof jQuery?e.parent("div,p").find("."+this.loadBoxClass).remove():$("#"+e).remove()}},CubeCMS.Form={init:function(){this.initLangSelector(),this.initUrlCheckers(),this.initAdvancedFormElements()},addRow:function(e){var t=$(e).closest(".form-input-multiple"),o=t.clone(!0),n=o.find("input");return n.attr("id",n.attr("id")+Math.floor(10*Math.random()+1)).attr("name",n.attr("name").replace(/\[.*\]/,"[]")).val(""),t.removeClass("form-input-multiple-last").find("a.button-add-multiple-line").hide(),t.after(o.hide()),o.show().css("display","table"),t.closest(".form-controls").find(".form-input-multiple").length>1&&t.closest(".form-controls").find("a.button-remove-multiple-line").show(),!1},removeRow:function(e){var t=$(e).closest(".form-input-multiple"),o=t.closest(".form-controls");return t.fadeOut(100,function(){t.hasClass("form-input-multiple-last")&&(t.prev().addClass("form-input-multiple-last").find("a.button-add-multiple-line").show(),t.prev().addClass("form-input-multiple-last")),$(this).remove(),1==o.find(".form-input-multiple").length&&o.find("a.button-remove-multiple-line").hide()}),!1},addButton:function(e,t){t=$.extend({icon:"refresh",href:window.location+"#",text:null,elementClass:null,id:null},t),e.parent().hasClass("input-group")||e.wrap($("<div></div>").addClass("input-group"));var o=$("<a></a>").addClass("input-group-btn").addClass(t.elementClass).prop({href:t.href,id:t.id});null!==t.icon&&o.append($("<span></span>").addClass("icon").addClass("icon-"+t.icon)),null!==t.text&&o.html(t.text),e.parent().append(o)},initLangSelector:function(){$("body").on("click","form .lang-container a.link-lang",function(e,t){"undefined"==typeof t&&(t=!0);var o=this.lang;$(this).parent().find("a").removeClass("link-lang-sel"),$(this).addClass("link-lang-sel");var n=$(this).closest("*:has(div[lang])");$("div[lang]",n).hide();var i=$('div[lang="'+o+'"]',n).show();return t&&i.find("input,textarea,select").focus(),n=$(this).closest("*:has(label[lang])")[0],$("label[lang]",n).hide(),$('label[lang="'+o+'"]',n).show(),!1}),$("body").on("click","form .lang-container a.link-lang-duplicator",function(e){e.preventDefault();var t=$(this).parent().find(".link-lang-sel").prop("lang"),o=$(this).closest("*:has(div[lang])");if(o.find('div[lang="'+t+'"] textarea').length>0)if(o.find('div[lang="'+t+'"] textarea + span.mceEditor')){var n=tinyMCE.get(o.find('div[lang="'+t+'"] textarea').prop("id")).getContent();o.find("textarea").each(function(){tinyMCE.get($(this).prop("id")).setContent(n)})}else o.find("div[lang] textarea").val(o.find('div[lang="'+t+'"] textarea').val());else o.find("div[lang] input,select").val(o.find('div[lang="'+t+'"] input,select').val())}),"undefined"!=typeof CubeCMS.primaryLang?$('.lang-container a[lang="'+CubeCMS.primaryLang+'"]').trigger("click",[!1]):$('.lang-container a[lang="'+CubeCMS.lang+'"]').trigger("click",[!1])},initUrlCheckers:function(){var e=this;$(".input-urlkey-autoupdate").on("change",function(){e.checkUrlKey($(this),$(this).data("checkurl"))}),$(".button_update_urlkey").on("click",function(t){t.preventDefault();var o=$($(this).data("element"));return e.checkUrlKey(o,o.data("checkurl")),!1})},checkUrlKey:function(e,t,o){var n={key:e.val(),lang:e.attr("lang")};$.extend(n,e.data()),"undefined"!=typeof o&&$.extend(n,o),e.trigger("beforeCheck",[n,t]),$.ajax({type:"POST",url:t,data:n,cache:!1,success:function(t){"undefined"!=typeof t.urlkey&&e.val(t.urlkey),e.trigger("checkComplete")}})},initAdvancedFormElements:function(){$("form").each(function(){var e=$(".form-group-advanced",this).hide(),t=$(this);if(e.length>0){$(this).addClass("form-advanced");var o=$("<button></button>").prop("type","button").html('<span class="icon icon-eye"></span> pokročilé možnosti').data("expanded",!1).on("click",function(){$(this).data("expanded")?($(".icon",this).removeClass("icon-eye-slash").addClass("icon-eye"),$(this).data("expanded",!1),$(".form-group-advanced,.form-fieldset-advanced",t).slideUp(300)):($(".icon",this).removeClass("icon-eye").addClass("icon-eye-slash"),$(this).data("expanded",!0),$(".form-fieldset-advanced .form-group-advanced",t).show(),$(".form-group-advanced,.form-fieldset-advanced",t).slideDown(300))});$(this).prepend($('<div class="form-advance-buttons"></div>').append(o))}$("form fieldset").each(function(){0===$(this).find("div.form-group:visible").length&&0===$(this).find("table.form-table").length&&$(this).addClass("form-fieldset-advanced").hide()})})}},CubeCMS.Modal={init:function(){$("body").on("click",".cubecms-modal .close-modal",function(){return CubeCMS.Modal.close($(this).closest(".cubecms-modal")),!1}).on("click",".modal-open-button",function(){return CubeCMS.Modal.open($($(this).data("modal"))),!1}),$(".cubecms-modal").each(function(){})},open:function(e){e=$(e),e.length>0&&($("body").addClass("cubecms-modal-open").css({paddingRight:CubeCMS.Tools.getScrollBarWidth()}),e.fadeIn(200))},close:function(e){e=$(e),e.length>0&&e.fadeOut(200,function(){$("body").removeClass("cubecms-modal-open").css({paddingRight:0})})}},CubeCMS.Popup={init:function(){var e=this;$(".cubecms-link-popup").each(function(){$(this).on("click",function(t){if(void 0!==$(this).prop("href")&&""!==$(this).prop("href")){t.preventDefault();var o=$(this).prop("href");return o=-1===o.indexOf("?")?o+"?popupwindow=1":o+"?popupwindow=1",o+=void 0===$(this).data("popup-callback")?"":"&callback="+$(this).data("popup-callback"),e.openPopup(o,$(this).prop("title"),$(this).data("popup-width"),$(this).data("popup-height")),!1}})})},openPopup:function(e,t,o,n){var i=void 0!==window.screenLeft?window.screenLeft:screen.left,a=void 0!==window.screenTop?window.screenTop:screen.top;width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var l=width/2-o/2+i,s=height/2-n/2+a,r=window.open(e,t,"scrollbars=yes, width="+o+", height="+n+", top="+s+", left="+l);window.focus&&r.focus()}},$(document).ready(function(){CubeCMS.setup(),$("body").on("click",".link-external",function(){return window.open(this.href),!1})});