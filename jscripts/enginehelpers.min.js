function vveShowMessages(a){CubeCMS.Msg.show(a)}function infoMsg(a,b){CubeCMS.Msg.info(a,b)}function clearInfoMsg(){CubeCMS.Msg.clear("info")}function clearErrMsg(){CubeCMS.Msg.clear("error")}function errMsg(a,b){CubeCMS.Msg.err(a,b)}function showLoadBox(a,b){CubeCMS.Loader.showLoadBox(a)}function hideLoadBox(){CubeCMS.Loader.hideLoadBox()}function vveLoadImage(a,b){CubeCMS.Images.loadImage(a,b)}function str2url(a,b,c){return CubeCMS.Tools.str2url(a,c)}function vveCheckUrlKey(a,b,c,d){var e=$(b),f={key:e.val(),lang:e.attr("lang")};"undefined"!=typeof d&&$.extend(f,d),$.ajax({type:"POST",url:a,data:f,cache:!1,success:function(a){!c&&""==c||"undefined"==typeof c||c("undefined"!=typeof a.urlkey?a.urlkey:null)}})}var CubeCMS=CubeCMS||{};CubeCMS={contentSelector:".main-content",lang:null,primaryLang:null,domain:null,toolboxTopOffset:30,baseOpt:{},init:function(a){$.extend(this,a),document.domain=this.domain,document.lang=this.lang,document.primaryLang=this.primaryLang,CubeCMS.ToolBox.toolboxTop=this.toolboxTopOffset},setup:function(){this.Msg.init(),this.Loader.init(),this.ToolBox.init(),this.Form.init(),this.Modal.init(),this.Popup.init()}},CubeCMS.Msg={infoBox:null,errBox:null,init:function(){this.infoBox=$("#infoMessages"),this.errBox=$("#errMessages")},info:function(a,b){return null==a?this:("undefined"==typeof b&&(b=!0),1==b&&this.clear("info"),this.infoBox.prepend("<p>"+a+"</p>").slideDown(),$("body").scrollTop(this.infoBox.offset().top-50),this)},err:function(a,b){return null==a?this:("undefined"==typeof b&&(b=!0),1==b&&this.clear("err"),this.errBox.prepend("<p>"+a+"</p>").slideDown(),$("body").scrollTop(this.errBox.offset().top-50),this)},show:function(a){if(this.clear("info"),this.clear("error"),"object"==typeof a.infomsg)for(var b=0;b<a.infomsg.length;b++)this.info(a.infomsg[b],!1);else"string"==typeof a.infomsg&&this.info(a.infomsg);if("object"==typeof a.errmsg)for(var c=0;c<a.errmsg.length;c++)this.err(a.errmsg[c],!1);else"string"==typeof a.infomsg&&this.err(a.errmsg)},clear:function(a){return"info"==a?this.infoBox.html(null).hide():"err"!=a&&"error"!=a||this.errBox.html(null).hide(),this}},CubeCMS.Tools={str2url:function(a,b){if(a=a.toUpperCase(),a=a.toLowerCase(),a=a.replace(/[\u0105\u0104\u00E0\u00E1\u00E2\u00E3\u00E4\u00E5]/g,"a"),a=a.replace(/[\u00E7\u010D\u0107\u0106]/g,"c"),a=a.replace(/[\u010F]/g,"d"),a=a.replace(/[\u00E8\u00E9\u00EA\u00EB\u011B\u0119\u0118]/g,"e"),a=a.replace(/[\u00EC\u00ED\u00EE\u00EF]/g,"i"),a=a.replace(/[\u0142\u0141]/g,"l"),a=a.replace(/[\u00F1\u0148]/g,"n"),a=a.replace(/[\u00F2\u00F3\u00F4\u00F5\u00F6\u00F8\u00D3]/g,"o"),a=a.replace(/[\u0159]/g,"r"),a=a.replace(/[\u015B\u015A\u0161]/g,"s"),a=a.replace(/[\u00DF]/g,"ss"),a=a.replace(/[\u0165]/g,"t"),a=a.replace(/[\u00F9\u00FA\u00FB\u00FC\u016F]/g,"u"),a=a.replace(/[\u00FD\u00FF]/g,"y"),a=a.replace(/[\u017C\u017A\u017B\u0179\u017E]/g,"z"),a=a.replace(/[\u00E6]/g,"ae"),a=a.replace(/[\u0153]/g,"oe"),a=a.replace(/[\u013E\u013A]/g,"l"),a=a.replace(/[\u0155]/g,"r"),a=a.replace(/[^a-z0-9\s\'\:\/\[\]-]/g,""),a=a.replace(/[\s\'\:\/\[\]-]+/g," "),a=a.replace(/[ ]/g,"-"),a=a.replace(/[\/]/g,"-"),1==b){var c=a.charAt(0);a=c.toUpperCase()+a.slice(1)}return a},stripHtml:function(a){var b=document.createElement("DIV");return b.innerHTML=a,b.textContent||b.innerText},checkUrlKey:function(a,b,c){var d=$(element);$.ajax({type:"POST",url:a,cache:!1,data:{key:d.val(),lang:d.attr("lang")},success:function(a){"undefined"!=typeof a.urlkey&&$.isFunction(c)&&c(a.urlkey)}})},contrastColor:function(a){var b=1-(.299*parseInt(a.substring(0,2),16)+.587*parseInt(a.substring(2,4),16)+.114*parseInt(a.substring(4,6),16))/255;return b<.5?"#000000":"#ffffff"},loadPageLang:function(a,b){showLoadBox(CubeCMS.contentSelector),$(CubeCMS.contentSelector).load(a,function(b){var c=a.match(/(l=[a-z]{2})/g);null!==c&&$(CubeCMS.contentSelector).html(b.replace(c[0],"")),hideLoadBox(),$(document).scroll()})},uniqID:{counter:0,get:function(a){a||(a="uniqid");var b=a+"-"+CubeCMS.Tools.uniqID.counter++;return 0===$("#"+b).length?b:CubeCMS.Tools.get(a)}},formatFileSize:function(a){var b=-1,c=[" kB"," MB"," GB"," TB","PB","EB","ZB","YB"];do a/=1024,b++;while(a>1024);return Math.max(a,.1).toFixed(1)+c[b]},getScrollBarWidth:function(){var a=document.createElement("div");a.className="scrollbar-measure",document.body.appendChild(a);var b=a.offsetWidth-a.clientWidth;return document.body.removeChild(a),b},rememberTabSelection:function(a,b){function d(a){return b?location.hash:localStorage.getItem(a)}function e(a,c){b?location.hash=c:localStorage.setItem(a,c)}var c="selectedTabFor"+a;d(c)&&$(a).find('a[href="'+d(c)+'"]').tab("show"),$(a).on("click","a[data-toggle]",function(a){e(c,this.getAttribute("href"))})}},CubeCMS.ToolBox={enablePageTracking:!0,toolboxTop:30,init:function(){var a=this;$(document).ajaxComplete(function(b,c,d){a.initHtml(),a.initEvents(),a.initLangLoader(),a.initFixedBoxs()}),this.initHtml()},initHtml:function(){$("div.toolbox").parent("div").css({position:"relative"}),$(".toolbox").each(function(){if(!$(this).data("_ccms_loaded")){$(this).data("_ccms_loaded",!0);var a=CubeCMS.Tools.uniqID.get("toolbox");$(this).prop("id",a),$(".toolbox-button",this).prop("id",a+"-button"),$(this).children(".toolbox-tools").prop("id",a+"-tools")}}),$(".toolbox>.toolbox-tools").appendTo("body"),this.initEvents(),this.initLangLoader(),this.initFixedBoxs()},initEvents:function(){var a=this;$("body").on("mouseenter","div.toolbox",function(a){var b="#"+$(this).prop("id");$(b).parent().addClass("toolbox-active-content"),console.log(b);var c=$(b+"-tools");c.css({top:$(this).offset().top-2,left:$(this).offset().left-c.outerWidth()+$(b+"-button").outerWidth()+2,right:"auto"}).fadeIn(100),$("body").on("touchstart",function(){c.trigger("mouseleave")})}),$("body").on("mouseleave","div.toolbox-tools",function(a){0===$(this).parent(".toolbox-tool").length&&("undefined"!=typeof a.fromElement&&!a.fromElement.length||"undefined"==typeof a.fromElement&&"SELECT"!==a.target.tagName)&&$(this).fadeOut(100),$("#"+$(this).prop("id").toString().replace("-tools","")).parent().removeClass("toolbox-active-content")}),$("body").on("touchstart",".toolbox-button",function(a){return $(this).parent().trigger("mouseenter"),!1}),$("body").on("touchstart",".toolbox-tools *",function(a){a.stopPropagation()}),$(document).on("scroll",function(){var b=$(this).scrollTop(),c=$(".toolbox");c.each(function(){var c=$(this).parent();c.is(":visible")&&c.offset().top<b+a.toolboxTop&&b<c.offset().top+c.height()-a.toolboxTop-$(".toolbox-button",this).outerHeight()?$(this).css({position:"fixed",top:a.toolboxTop,left:$(this).offset().left,right:"auto"}):$(this).css({position:"absolute",top:3,right:3,left:"auto"})})})},initLangLoader:function(){$("body").on("click","a.toolbox-changelang-button",function(a){a.preventDefault(),CubeCMS.Loader.showLoadBox(".main-content");var b=this.href;return $(".main-content").load(b,function(a){var c=b.match(/(l=[a-z]{2})/g);null!=c&&$(".main-content").html(a.replace(c[0],"")),CubeCMS.Loader.hideLoadBox(),$(document).scroll()}),!1})},initFixedBoxs:function(){$(".fixed-actions-box").each(function(){var a=$(this);if(a.data("container")){var b=$(a.data("container")),c=a.offset().top,d=a.offset().top+b.outerHeight();$(window).on("scroll",function(){$(window).scrollTop()+30>c&&$(window).scrollTop()<d?a.hasClass("fixed-actions-box-helper")||(a.after($('<div class="fixed-actions-box-palceholder hidden"></div>').height(a.height()).width(a.width())),a.outerWidth(a.outerWidth()).addClass("fixed-actions-box-helper").css({left:a.offset().left})):(a.removeClass("fixed-actions-box-helper").css({left:"auto",width:"auto"}),a.next(".fixed-actions-box-palceholder").remove())})}})}},CubeCMS.ToolBox.Tool={init:function(){}},CubeCMS.Images={slideShowFade:function(a,b){$(a+" .image:gt(0)").hide(),setInterval(function(){$(a+" .image:first").fadeOut().next(".image").fadeIn().end().appendTo(a)},b)},loadImage:function(a,b){var c=document.createElement("img");c.onload=function(){$.isFunction(b)&&b.call(c)},c.src=a}},CubeCMS.Loader={timeout:1e4,loaderCnt:'<div id="loadingBox" class="loadingBox"><div class="loader-w"><span class="loader-text">{MSG}</span></div>',loadBoxClass:"loadingBox",init:function(){},loadUrl:function(a,b){},showLoadBox:function(a,b){"undefined"==typeof b&&(b="loading...");var c="loadingBox-"+Math.floor(1e4*Math.random(0)),d=$(a).parent("div,p"),e=$(this.loaderCnt.replace("{MSG}",b)).addClass(this.loadBoxClass).attr("id",c).css({position:"absolute",top:0,left:0,opacity:0,width:d.width()+parseInt(d.css("padding-left"))+parseInt(d.css("padding-right"))+parseInt(d.css("margin-left"))+parseInt(d.css("margin-right")),height:d.height()+parseInt(d.css("padding-top"))+parseInt(d.css("padding-bottom"))+parseInt(d.css("margin-top"))+parseInt(d.css("margin-bottom"))});"absolute"!=d.css("position")&&"relative"!=d.css("position")&&d.css("position","relative"),d.prepend(e.hide()),e.fadeTo(500,1);var f=this;return setTimeout(function(){f.hideLoadBox(c)},this.timeout),c},hideLoadBox:function(a){"undefined"==typeof a?$("."+this.loadBoxClass).remove():a instanceof jQuery?a.parent("div,p").find("."+this.loadBoxClass).remove():$("#"+a).remove()}},CubeCMS.Form={init:function(){this.initLangSelector(),this.initUrlCheckers(),this.initAdvancedFormElements()},addRow:function(a){var b=$(a).closest(".form-input-multiple"),c=b.clone(!0),d=c.find("input");return d.attr("id",d.attr("id")+Math.floor(10*Math.random()+1)).attr("name",d.attr("name").replace(/\[.*\]/,"[]")).val(""),b.removeClass("form-input-multiple-last").find("a.button-add-multiple-line").hide(),b.after(c.hide()),c.show().css("display","table"),b.closest(".form-controls").find(".form-input-multiple").length>1&&b.closest(".form-controls").find("a.button-remove-multiple-line").show(),!1},removeRow:function(a){var b=$(a).closest(".form-input-multiple"),c=b.closest(".form-controls");return b.fadeOut(100,function(){b.hasClass("form-input-multiple-last")&&(b.prev().addClass("form-input-multiple-last").find("a.button-add-multiple-line").show(),b.prev().addClass("form-input-multiple-last")),$(this).remove(),1==c.find(".form-input-multiple").length&&c.find("a.button-remove-multiple-line").hide()}),!1},addButton:function(a,b){b=$.extend({icon:"refresh",href:window.location+"#",text:null,elementClass:null,id:null},b),a.parent().hasClass("input-group")||a.wrap($("<div></div>").addClass("input-group"));var c=$("<a></a>").addClass("input-group-btn").addClass(b.elementClass).prop({href:b.href,id:b.id});null!==b.icon&&c.append($("<span></span>").addClass("icon").addClass("icon-"+b.icon)),null!==b.text&&c.html(b.text),a.parent().append(c)},initLangSelector:function(){$("body").on("click","form .lang-container a.link-lang",function(a,b){"undefined"==typeof b&&(b=!0);var c=this.lang;$(this).parent().find("a").removeClass("link-lang-sel"),$(this).addClass("link-lang-sel");var d=$(this).closest("*:has(div[lang])");$("div[lang]",d).hide();var e=$('div[lang="'+c+'"]',d).show();return b&&e.find("input,textarea,select").focus(),d=$(this).closest("*:has(label[lang])")[0],$("label[lang]",d).hide(),$('label[lang="'+c+'"]',d).show(),!1}),$("body").on("click","form .lang-container a.link-lang-duplicator",function(a){a.preventDefault();var b=$(this).parent().find(".link-lang-sel").prop("lang"),c=$(this).closest("*:has(div[lang])");if(c.find('div[lang="'+b+'"] textarea').length>0)if(c.find('div[lang="'+b+'"] textarea + span.mceEditor')){var d=tinyMCE.get(c.find('div[lang="'+b+'"] textarea').prop("id")).getContent();c.find("textarea").each(function(){tinyMCE.get($(this).prop("id")).setContent(d)})}else c.find("div[lang] textarea").val(c.find('div[lang="'+b+'"] textarea').val());else c.find("div[lang] input,select").val(c.find('div[lang="'+b+'"] input,select').val())}),"undefined"!=typeof CubeCMS.primaryLang?$('.lang-container a[lang="'+CubeCMS.primaryLang+'"]').trigger("click",[!1]):$('.lang-container a[lang="'+CubeCMS.lang+'"]').trigger("click",[!1])},initUrlCheckers:function(){var a=this;$(".input-urlkey-autoupdate").on("change",function(){a.checkUrlKey($(this),$(this).data("checkurl"))}),$(".button_update_urlkey").on("click",function(b){b.preventDefault();var c=$($(this).data("element"));return a.checkUrlKey(c,c.data("checkurl")),!1})},checkUrlKey:function(a,b,c){var d={key:a.val(),lang:a.attr("lang")};$.extend(d,a.data()),"undefined"!=typeof c&&$.extend(d,c),a.trigger("beforeCheck",[d,b]),$.ajax({type:"POST",url:b,data:d,cache:!1,success:function(b){"undefined"!=typeof b.urlkey&&a.val(b.urlkey),a.trigger("checkComplete")}})},initAdvancedFormElements:function(){$("form").each(function(){var a=$(".form-group-advanced",this).hide(),b=$(this);if(a.length>0){$(this).addClass("form-advanced");var c=$("<button></button>").prop("type","button").html('<span class="icon icon-eye"></span> pokročilé možnosti').data("expanded",!1).on("click",function(){$(this).data("expanded")?($(".icon",this).removeClass("icon-eye-slash").addClass("icon-eye"),$(this).data("expanded",!1),$(".form-group-advanced,.form-fieldset-advanced",b).slideUp(300)):($(".icon",this).removeClass("icon-eye").addClass("icon-eye-slash"),$(this).data("expanded",!0),$(".form-fieldset-advanced .form-group-advanced",b).show(),$(".form-group-advanced,.form-fieldset-advanced",b).slideDown(300))});$(this).prepend($('<div class="form-advance-buttons"></div>').append(c))}$("form fieldset").each(function(){0===$(this).find("div.form-group:visible").length&&0===$(this).find("table.form-table").length&&$(this).addClass("form-fieldset-advanced").hide()})})}},CubeCMS.Modal={init:function(){$("body").on("click",".cubecms-modal .close-modal",function(){return CubeCMS.Modal.close($(this).closest(".cubecms-modal")),!1}).on("click",".modal-open-button",function(){return CubeCMS.Modal.open($($(this).data("modal"))),!1}),$(".cubecms-modal").each(function(){})},open:function(a){a=$(a),a.length>0&&($("body").addClass("cubecms-modal-open").css({paddingRight:CubeCMS.Tools.getScrollBarWidth()}),a.fadeIn(200))},close:function(a){a=$(a),a.length>0&&a.fadeOut(200,function(){$("body").removeClass("cubecms-modal-open").css({paddingRight:0})})}},CubeCMS.Popup={init:function(){var a=this;$(".cubecms-link-popup").each(function(){$(this).on("click",function(b){if(void 0!==$(this).prop("href")&&""!==$(this).prop("href")){b.preventDefault();var c=$(this).prop("href");return c=c.indexOf("?")===-1?c+"?popupwindow=1":c+"&popupwindow=1",c+=void 0===$(this).data("popup-callback")?"":"&callback="+$(this).data("popup-callback"),a.openPopup(c,$(this).prop("title"),$(this).data("popup-width"),$(this).data("popup-height")),!1}})}),$("body.popup .button-cancel").click(function(){window.close()})},openPopup:function(a,b,c,d){var e=void 0!==window.screenLeft?window.screenLeft:screen.left,f=void 0!==window.screenTop?window.screenTop:screen.top;width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var g=width/2-c/2+e,h=height/2-d/2+f,i=window.open(a,b,"scrollbars=yes, width="+c+", height="+d+", top="+h+", left="+g);window.focus&&i.focus()}},$(document).ready(function(){CubeCMS.setup(),$("body").on("click",".link-external",function(){return window.open(this.href),!1})});