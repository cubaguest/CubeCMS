function vveShowMessages(t){CubeCMS.Msg.show(t)}function infoMsg(t,e){CubeCMS.Msg.info(t,e)}function clearInfoMsg(){CubeCMS.Msg.clear("info")}function clearErrMsg(){CubeCMS.Msg.clear("error")}function errMsg(t,e){CubeCMS.Msg.err(t,e)}function showLoadBox(t,e){CubeCMS.Loader.showLoadBox(t)}function hideLoadBox(){CubeCMS.Loader.hideLoadBox()}function vveLoadImage(t,e){CubeCMS.Images.loadImage(t,e)}function str2url(t,e,o){return CubeCMS.Tools.str2url(t,o)}function vveCheckUrlKey(t,e,o,n){var i=$(e),a={key:i.val(),lang:i.attr("lang")};void 0!==n&&$.extend(a,n),$.ajax({type:"POST",url:t,data:a,cache:!1,success:function(t){!o&&""==o||void 0===o||o(void 0!==t.urlkey?t.urlkey:null)}})}var CubeCMS=CubeCMS||{};(CubeCMS={contentSelector:".main-content",lang:null,primaryLang:null,domain:null,toolboxTopOffset:30,baseOpt:{},init:function(t){$.extend(this,t),document.domain=this.domain,document.lang=this.lang,document.primaryLang=this.primaryLang,CubeCMS.ToolBox.toolboxTop=this.toolboxTopOffset},setup:function(){this.Msg.init(),this.Loader.init(),this.ToolBox.init(),this.Form.init(),this.Modal.init(),this.Popup.init()}}).Msg={infoBox:null,errBox:null,init:function(){this.infoBox=$("#infoMessages"),this.errBox=$("#errMessages")},info:function(t,e){return null==t?this:(void 0===e&&(e=!0),1==e&&this.clear("info"),this.infoBox.prepend("<p>"+t+"</p>").slideDown(),$("body").scrollTop(this.infoBox.offset().top-50),this)},err:function(t,e){return null==t?this:(void 0===e&&(e=!0),1==e&&this.clear("err"),this.errBox.prepend("<p>"+t+"</p>").slideDown(),$("body").scrollTop(this.errBox.offset().top-50),this)},show:function(t){if(this.clear("info"),this.clear("error"),"object"==typeof t.infomsg)for(var e=0;e<t.infomsg.length;e++)this.info(t.infomsg[e],!1);else"string"==typeof t.infomsg&&this.info(t.infomsg);if("object"==typeof t.errmsg)for(var o=0;o<t.errmsg.length;o++)this.err(t.errmsg[o],!1);else"string"==typeof t.infomsg&&this.err(t.errmsg)},clear:function(t){return"info"==t?this.infoBox.html(null).hide():"err"!=t&&"error"!=t||this.errBox.html(null).hide(),this}},CubeCMS.Tools={str2url:function(t,e){return t=t.toUpperCase(),t=t.toLowerCase(),t=t.replace(/[\u0105\u0104\u00E0\u00E1\u00E2\u00E3\u00E4\u00E5]/g,"a"),t=t.replace(/[\u00E7\u010D\u0107\u0106]/g,"c"),t=t.replace(/[\u010F]/g,"d"),t=t.replace(/[\u00E8\u00E9\u00EA\u00EB\u011B\u0119\u0118]/g,"e"),t=t.replace(/[\u00EC\u00ED\u00EE\u00EF]/g,"i"),t=t.replace(/[\u0142\u0141]/g,"l"),t=t.replace(/[\u00F1\u0148]/g,"n"),t=t.replace(/[\u00F2\u00F3\u00F4\u00F5\u00F6\u00F8\u00D3]/g,"o"),t=t.replace(/[\u0159]/g,"r"),t=t.replace(/[\u015B\u015A\u0161]/g,"s"),t=t.replace(/[\u00DF]/g,"ss"),t=t.replace(/[\u0165]/g,"t"),t=t.replace(/[\u00F9\u00FA\u00FB\u00FC\u016F]/g,"u"),t=t.replace(/[\u00FD\u00FF]/g,"y"),t=t.replace(/[\u017C\u017A\u017B\u0179\u017E]/g,"z"),t=t.replace(/[\u00E6]/g,"ae"),t=t.replace(/[\u0153]/g,"oe"),t=t.replace(/[\u013E\u013A]/g,"l"),t=t.replace(/[\u0155]/g,"r"),t=t.replace(/[^a-z0-9\s\'\:\/\[\]-]/g,""),t=t.replace(/[\s\'\:\/\[\]-]+/g," "),t=t.replace(/[ ]/g,"-"),t=t.replace(/[\/]/g,"-"),1==e&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t},stripHtml:function(t){var e=document.createElement("DIV");return e.innerHTML=t,e.textContent||e.innerText},checkUrlKey:function(t,e,o){var n=$(element);$.ajax({type:"POST",url:t,cache:!1,data:{key:n.val(),lang:n.attr("lang")},success:function(t){void 0!==t.urlkey&&$.isFunction(o)&&o(t.urlkey)}})},contrastColor:function(t){return 1-(.299*parseInt(t.substring(0,2),16)+.587*parseInt(t.substring(2,4),16)+.114*parseInt(t.substring(4,6),16))/255<.5?"#000000":"#ffffff"},loadPageLang:function(t,e){showLoadBox(CubeCMS.contentSelector),$(CubeCMS.contentSelector).load(t,function(e){var o=t.match(/(l=[a-z]{2})/g);null!==o&&$(CubeCMS.contentSelector).html(e.replace(o[0],"")),hideLoadBox(),$(document).scroll()})},uniqID:{counter:0,get:function(t){t||(t="uniqid");var e=t+"-"+CubeCMS.Tools.uniqID.counter++;return 0===$("#"+e).length?e:CubeCMS.Tools.get(t)}},formatFileSize:function(t){var e=-1,o=[" kB"," MB"," GB"," TB","PB","EB","ZB","YB"];do{t/=1024,e++}while(t>1024);return Math.max(t,.1).toFixed(1)+o[e]},getScrollBarWidth:function(){var t=document.createElement("div");t.className="scrollbar-measure",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e},rememberTabSelection:function(t,e){function o(t){return e?location.hash:localStorage.getItem(t)}function n(t,o){e?location.hash=o:localStorage.setItem(t,o)}var i="selectedTabFor"+t;o(i)&&$(t).find('a[href="'+o(i)+'"]').tab("show"),$(t).on("click","a[data-toggle]",function(t){n(i,this.getAttribute("href"))})},callFunction:function(t,e){for(var o=Array.prototype.slice.call(arguments,2),n=t.split("."),i=n.pop(),a=0;a<n.length;a++)e=e[n[a]];return e[i].apply(e,o)},functionExist:function(t,e){void 0===typeof e&&(e=window);Array.prototype.slice.call(arguments,2);for(var o=t.split("."),n=o.pop(),i=0;i<o.length;i++)e=e[o[i]];return void 0!==e&&"function"==typeof e[n]},containsObject:function(t,e){var o;for(o=0;o<e.length;o++)if(e[o]===t)return!0;return!1}},CubeCMS.ToolBox={enablePageTracking:!0,toolboxTop:30,boxesPositions:new Array,init:function(){var t=this;$(document).ajaxComplete(function(e,o,n){t.initHtml(),t.initEvents(),t.initLangLoader(),t.initFixedBoxs()}),this.initHtml()},containPosition:function(t,e){var o;for(o=0;o<e.length;o++)if(e[o].top===t.top&&e[o].left===t.left)return!0;return!1},initHtml:function(){$("div.toolbox").parent("div").css({position:"relative"}),$(".toolbox").each(function(){if(!$(this).data("_ccms_loaded")){$(this).data("_ccms_loaded",!0);var t=CubeCMS.Tools.uniqID.get("toolbox");$(this).prop("id",t),$(".toolbox-button",this).prop("id",t+"-button"),$(this).children(".toolbox-tools").prop("id",t+"-tools");var e={top:$(this).offset().top,left:$(this).offset().left};CubeCMS.ToolBox.containPosition(e,CubeCMS.ToolBox.boxesPositions)?$(this).data("offset-right-multiplier",1):($(this).data("offset-right-multiplier",0),CubeCMS.ToolBox.boxesPositions.push({top:$(this).offset().top,left:$(this).offset().left})),console.log(e),$(this).css("right",3+CubeCMS.ToolBox.getToolboxOffset($(this)))}}),$(".toolbox>.toolbox-tools").appendTo("body"),this.initEvents(),this.initLangLoader(),this.initFixedBoxs()},initEvents:function(){var t=this;$("body").on("mouseenter","div.toolbox",function(t){var e="#"+$(this).prop("id");$(e).parent().addClass("toolbox-active-content");var o=$(e+"-tools");o.css({top:$(this).offset().top-2,left:$(this).offset().left-o.outerWidth()+$(e+"-button").outerWidth()+2,right:"auto"}).fadeIn(100),$("body").on("touchstart",function(){o.trigger("mouseleave")})}),$("body").on("mouseleave","div.toolbox-tools",function(t){0===$(this).parent(".toolbox-tool").length&&(void 0!==t.fromElement&&!t.fromElement.length||void 0===t.fromElement&&"SELECT"!==t.target.tagName)&&$(this).fadeOut(100),$("#"+$(this).prop("id").toString().replace("-tools","")).parent().removeClass("toolbox-active-content")}),$("body").on("touchstart",".toolbox-button",function(t){return $(this).parent().trigger("mouseenter"),!1}),$("body").on("touchstart",".toolbox-tools *",function(t){t.stopPropagation()}),$(document).on("scroll",function(){var e=$(this).scrollTop();$(".toolbox").each(function(){var o=$(this).parent();o.is(":visible")&&o.offset().top<e+t.toolboxTop&&e<o.offset().top+o.height()-t.toolboxTop-$(".toolbox-button",this).outerHeight()?$(this).css({position:"fixed",top:t.toolboxTop,left:$(this).offset().left,right:"auto"}):$(this).css({position:"absolute",top:3,right:3+CubeCMS.ToolBox.getToolboxOffset($(this)),left:"auto"})})})},getToolboxOffset:function(t){var e=0;return t.data("offset-right-multiplier")>0&&(e=t.data("offset-right-multiplier")*t.outerWidth()+5),e},initLangLoader:function(){$("body").on("click","a.toolbox-changelang-button",function(t){t.preventDefault(),CubeCMS.Loader.showLoadBox(".main-content");var e=this.href;return $(".main-content").load(e,function(t){var o=e.match(/(l=[a-z]{2})/g);null!=o&&$(".main-content").html(t.replace(o[0],"")),CubeCMS.Loader.hideLoadBox(),$(document).scroll()}),!1})},initFixedBoxs:function(){$(".fixed-actions-box").each(function(){var t=$(this);if(t.data("container")){var e=$(t.data("container")),o=t.offset().top,n=t.offset().top+e.outerHeight();$(window).on("scroll",function(){$(window).scrollTop()+30>o&&$(window).scrollTop()<n?t.hasClass("fixed-actions-box-helper")||(t.after($('<div class="fixed-actions-box-palceholder hidden"></div>').height(t.height()).width(t.width())),t.outerWidth(t.outerWidth()).addClass("fixed-actions-box-helper").css({left:t.offset().left})):(t.removeClass("fixed-actions-box-helper").css({left:"auto",width:"auto"}),t.next(".fixed-actions-box-palceholder").remove())})}})}},CubeCMS.ToolBox.Tool={init:function(){}},CubeCMS.Images={slideShowFade:function(t,e){$(t+" .image:gt(0)").hide(),setInterval(function(){$(t+" .image:first").fadeOut().next(".image").fadeIn().end().appendTo(t)},e)},loadImage:function(t,e){var o=document.createElement("img");o.onload=function(){$.isFunction(e)&&e.call(o)},o.src=t}},CubeCMS.Loader={timeout:1e4,loaderCnt:'<div id="loadingBox" class="loadingBox"><div class="loader-w"><span class="loader-text">{MSG}</span></div>',loadBoxClass:"loadingBox",init:function(){},loadUrl:function(t,e){},showLoadBox:function(t,e){void 0===e&&(e="loading...");var o="loadingBox-"+Math.floor(1e4*Math.random(0)),n=$(t).parent("div,p"),i=$(this.loaderCnt.replace("{MSG}",e)).addClass(this.loadBoxClass).attr("id",o).css({position:"absolute",top:0,left:0,opacity:0,width:n.width()+parseInt(n.css("padding-left"))+parseInt(n.css("padding-right"))+parseInt(n.css("margin-left"))+parseInt(n.css("margin-right")),height:n.height()+parseInt(n.css("padding-top"))+parseInt(n.css("padding-bottom"))+parseInt(n.css("margin-top"))+parseInt(n.css("margin-bottom"))});"absolute"!=n.css("position")&&"relative"!=n.css("position")&&n.css("position","relative"),n.prepend(i.hide()),i.fadeTo(500,1);var a=this;return setTimeout(function(){a.hideLoadBox(o)},this.timeout),o},hideLoadBox:function(t){void 0===t?$("."+this.loadBoxClass).remove():t instanceof jQuery?t.parent("div,p").find("."+this.loadBoxClass).remove():$("#"+t).remove()}},CubeCMS.Form={init:function(){this.initLangSelector(),this.initUrlCheckers(),this.initAdvancedFormElements(),this.initAjaxForms()},addRow:function(t){var e=$(t).closest(".form-input-multiple"),o=e.clone(!0),n=o.find("input");return n.attr("id",n.attr("id")+Math.floor(10*Math.random()+1)).attr("name",n.attr("name").replace(/\[.*\]/,"[]")).val(""),e.removeClass("form-input-multiple-last").find("a.button-add-multiple-line").hide(),e.after(o.hide()),o.show().css("display","table"),e.closest(".form-controls").find(".form-input-multiple").length>1&&e.closest(".form-controls").find("a.button-remove-multiple-line").show(),!1},removeRow:function(t){var e=$(t).closest(".form-input-multiple"),o=e.closest(".form-controls");return e.fadeOut(100,function(){e.hasClass("form-input-multiple-last")&&(e.prev().addClass("form-input-multiple-last").find("a.button-add-multiple-line").show(),e.prev().addClass("form-input-multiple-last")),$(this).remove(),1==o.find(".form-input-multiple").length&&o.find("a.button-remove-multiple-line").hide()}),!1},addButton:function(t,e){e=$.extend({icon:"refresh",href:window.location+"#",text:null,elementClass:null,id:null},e),t.parent().hasClass("input-group")||t.wrap($("<div></div>").addClass("input-group"));var o=$("<a></a>").addClass("input-group-btn").addClass(e.elementClass).prop({href:e.href,id:e.id});null!==e.icon&&o.append($("<span></span>").addClass("icon").addClass("icon-"+e.icon)),null!==e.text&&o.html(e.text),t.parent().append(o)},initLangSelector:function(){$("body").on("click","form .lang-container a.link-lang",function(t,e){void 0===e&&(e=!0);var o=this.lang;$(this).parent().find("a").removeClass("link-lang-sel"),$(this).addClass("link-lang-sel");var n=$(this).closest("*:has(div[lang])");$("div[lang]",n).hide();var i=$('div[lang="'+o+'"]',n).show();return e&&i.find("input,textarea,select").focus(),n=$(this).closest("*:has(label[lang])")[0],$("label[lang]",n).hide(),$('label[lang="'+o+'"]',n).show(),!1}),$("body").on("click","form .lang-container a.link-lang-duplicator",function(t){t.preventDefault();var e=$(this).parent().find(".link-lang-sel").prop("lang"),o=$(this).closest("*:has(div[lang])");if(o.find('div[lang="'+e+'"] textarea').length>0)if(o.find('div[lang="'+e+'"] textarea + span.mceEditor')){var n=tinyMCE.get(o.find('div[lang="'+e+'"] textarea').prop("id")).getContent();o.find("textarea").each(function(){tinyMCE.get($(this).prop("id")).setContent(n)})}else o.find("div[lang] textarea").val(o.find('div[lang="'+e+'"] textarea').val());else o.find("div[lang] input,select").val(o.find('div[lang="'+e+'"] input,select').val())}),void 0!==CubeCMS.primaryLang?$('.lang-container a[lang="'+CubeCMS.primaryLang+'"]').trigger("click",[!1]):$('.lang-container a[lang="'+CubeCMS.lang+'"]').trigger("click",[!1])},initUrlCheckers:function(){var t=this;$(".input-urlkey-autoupdate").on("change",function(){t.checkUrlKey($(this),$(this).data("checkurl"))}),$(".button_update_urlkey").on("click",function(e){e.preventDefault();var o=$($(this).data("element"));return t.checkUrlKey(o,o.data("checkurl")),!1})},checkUrlKey:function(t,e,o){var n={key:t.val(),lang:t.attr("lang")};$.extend(n,t.data()),void 0!==o&&$.extend(n,o),t.trigger("beforeCheck",[n,e]),$.ajax({type:"POST",url:e,data:n,cache:!1,success:function(e){void 0!==e.urlkey&&t.val(e.urlkey),t.trigger("checkComplete")}})},initAdvancedFormElements:function(){$("form").each(function(){var t=$(".form-group-advanced",this).hide(),e=$(this);if(t.length>0){$(this).addClass("form-advanced");var o=$("<button></button>").prop("type","button").html('<span class="icon icon-eye"></span> pokročilé možnosti').data("expanded",!1).on("click",function(){$(this).data("expanded")?($(".icon",this).removeClass("icon-eye-slash").addClass("icon-eye"),$(this).data("expanded",!1),$(".form-group-advanced,.form-fieldset-advanced",e).slideUp(300)):($(".icon",this).removeClass("icon-eye").addClass("icon-eye-slash"),$(this).data("expanded",!0),$(".form-fieldset-advanced .form-group-advanced",e).show(),$(".form-group-advanced,.form-fieldset-advanced",e).slideDown(300))});$(this).prepend($('<div class="form-advance-buttons"></div>').append(o))}$("form fieldset").each(function(){0!==$(this).find("div.form-group:visible").length||0!==$(this).find("table.form-table").length||$(this).hasClass("not-hidden")||$(this).addClass("form-fieldset-advanced").hide()})})},setMessages:function(t,e){if(t.find(".form-errors,.form-success").html(null),e.errmsg.length>0&&((o=t.find(".form-errors")).html(null),$.each(e.errmsg,function(t,e){"string"==typeof e&&o.append("<div>"+e+"</div>")}),o.slideDown(400)),0===t.find(".form-errors div").length&&t.find(".form-errors").hide(),e.infomsg.length>0){var o=t.find(".form-success");o.html(null),$.each(e.infomsg,function(t,e){o.append("<div>"+e+"</div>")}),o.slideDown(400)}else t.find(".form-success").hide();0==e.infomsg.length&&0==e.errmsg.length&&this.hideMessages(t)},hideMessages:function(t){t.find(".form-success,.form-errors").slideUp(400)},initAjaxForms:function(){$("form.cubecms-ajax-form").each(function(){$(this).on("submit",function(t){t.preventDefault();var e=$(this);CubeCMS.Form.hideMessages(e);var o={method:"POST",url:e.prop("action"),data:e.serialize()+"&_cubecms_respond_class=",success:function(t){if("object"==typeof t){var o=e.data("callback");void 0!==o&&CubeCMS.Tools.functionExist(o)?CubeCMS.Tools.callFunction(e.data("callback"),window,e,t):CubeCMS.Form.ajaxFormSuccess(e,t)}else console.log("ERR: neimplmentovaná chyba aplikace")}};return $.ajax(o),!1})})},ajaxFormSuccess:function(t,e){void 0!==e.redirect&&window.location.replace(e.redirect),CubeCMS.Form.setMessages(t,e)}},CubeCMS.Modal={init:function(){$("body").on("click",".cubecms-modal .close-modal",function(){return CubeCMS.Modal.close($(this).closest(".cubecms-modal")),!1}).on("click",".modal-open-button",function(){return CubeCMS.Modal.open($($(this).data("modal"))),!1}),$(".cubecms-modal").each(function(){})},open:function(t){(t=$(t)).length>0&&($("body").addClass("cubecms-modal-open").css({paddingRight:CubeCMS.Tools.getScrollBarWidth()}),t.fadeIn(200))},close:function(t){(t=$(t)).length>0&&t.fadeOut(200,function(){$("body").removeClass("cubecms-modal-open").css({paddingRight:0})})}},CubeCMS.Popup={init:function(){var t=this;$(".cubecms-link-popup").each(function(){$(this).on("click",function(e){if(void 0!==$(this).prop("href")&&""!==$(this).prop("href")){e.preventDefault();var o=$(this).prop("href");return o=-1===o.indexOf("?")?o+"?popupwindow=1":o+"&popupwindow=1",o+=void 0===$(this).data("popup-callback")?"":"&callback="+$(this).data("popup-callback"),t.openPopup(o,$(this).prop("title"),$(this).data("popup-width"),$(this).data("popup-height")),!1}})}),$("body.popup .button-cancel").click(function(){window.close()})},openPopup:function(t,e,o,n){var i=void 0!==window.screenLeft?window.screenLeft:screen.left,a=void 0!==window.screenTop?window.screenTop:screen.top;width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var s=width/2-o/2+i,r=height/2-n/2+a,l=window.open(t,e,"scrollbars=yes, width="+o+", height="+n+", top="+r+", left="+s);window.focus&&l.focus()}},$(document).ready(function(){CubeCMS.setup(),$("body").on("click",".link-external",function(){return window.open(this.href),!1})});