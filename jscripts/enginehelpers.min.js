var CubeCMS=CubeCMS||{};CubeCMS={contentSelector:".main-content",lang:null,primaryLang:null,domain:null,baseOpt:{},init:function(a){$.extend(this,a);document.domain=this.domain;document.lang=this.lang;document.primaryLang=this.primaryLang},setup:function(){this.Msg.init();this.Loader.init()}};CubeCMS.Msg={infoBox:null,errBox:null,init:function(){this.infoBox=$("#infoMessages");this.errBox=$("#errMessages")},info:function(b,a){if(b==null){return this}if(typeof(a)=="undefined"){a=true}if(a==true){this.clear("info")}this.infoBox.prepend("<p>"+b+"</p>").slideDown();return this},err:function(b,a){if(b==null){return this}if(typeof(a)=="undefined"){a=true}if(a==true){this.clear("err")}this.errBox.prepend("<p>"+b+"</p>").slideDown();return this},show:function(a){this.clear("info");this.clear("error");if(typeof(a.infomsg)=="object"){for(var b=0;b<a.infomsg.length;b++){this.info(a.infomsg[b],false)}}else{if(typeof(a.infomsg)=="string"){this.info(a.infomsg)}}if(typeof(a.errmsg)=="object"){for(var c=0;c<a.errmsg.length;c++){this.err(a.errmsg[c],false)}}else{if(typeof(a.infomsg)=="string"){this.err(a.errmsg)}}},clear:function(a){if(a=="info"){this.infoBox.html(null).hide()}else{if(a=="err"||a=="error"){this.errBox.html(null).hide()}}return this}};CubeCMS.Tools={str2url:function(b,a){b=b.toUpperCase();b=b.toLowerCase();b=b.replace(/[\u0105\u0104\u00E0\u00E1\u00E2\u00E3\u00E4\u00E5]/g,"a");b=b.replace(/[\u00E7\u010D\u0107\u0106]/g,"c");b=b.replace(/[\u010F]/g,"d");b=b.replace(/[\u00E8\u00E9\u00EA\u00EB\u011B\u0119\u0118]/g,"e");b=b.replace(/[\u00EC\u00ED\u00EE\u00EF]/g,"i");b=b.replace(/[\u0142\u0141]/g,"l");b=b.replace(/[\u00F1\u0148]/g,"n");b=b.replace(/[\u00F2\u00F3\u00F4\u00F5\u00F6\u00F8\u00D3]/g,"o");b=b.replace(/[\u0159]/g,"r");b=b.replace(/[\u015B\u015A\u0161]/g,"s");b=b.replace(/[\u00DF]/g,"ss");b=b.replace(/[\u0165]/g,"t");b=b.replace(/[\u00F9\u00FA\u00FB\u00FC\u016F]/g,"u");b=b.replace(/[\u00FD\u00FF]/g,"y");b=b.replace(/[\u017C\u017A\u017B\u0179\u017E]/g,"z");b=b.replace(/[\u00E6]/g,"ae");b=b.replace(/[\u0153]/g,"oe");b=b.replace(/[\u013E\u013A]/g,"l");b=b.replace(/[\u0155]/g,"r");b=b.replace(/[^a-z0-9\s\'\:\/\[\]-]/g,"");b=b.replace(/[\s\'\:\/\[\]-]+/g," ");b=b.replace(/[ ]/g,"-");b=b.replace(/[\/]/g,"-");if(a==1){var d=b.charAt(0);b=d.toUpperCase()+b.slice(1)}return b},stripHtml:function(b){var a=document.createElement("DIV");a.innerHTML=b;return a.textContent||a.innerText},checkUrlKey:function(a,c,d){var b=$(element);$.ajax({type:"POST",url:a,cache:false,data:{key:b.val(),lang:b.attr("lang")},success:function(e){if(typeof e.urlkey!="undefined"&&$.isFunction(d)){d(e.urlkey)}}})},contrastColor:function(c){var b=1-(0.299*parseInt((c).substring(0,2),16)+0.587*parseInt((c).substring(2,4),16)+0.114*parseInt((c).substring(4,6),16))/255;if(b<0.5){return"#000000"}else{return"#ffffff"}}};CubeCMS.ToolBox={init:function(){}};CubeCMS.ToolBox.Tool={};CubeCMS.Images={slideShowFade:function(a,b){$(a+" .image:gt(0)").hide();setInterval(function(){$(a+" .image:first").fadeOut().next(".image").fadeIn().end().appendTo(a)},b)},loadImage:function(b,c){var a=document.createElement("img");a.onload=function(){if($.isFunction(c)){c.call(a)}};a.src=b},};CubeCMS.Loader={timeout:10000,loaderCnt:'<div id="loadingBox" class="loadingBox"><div class="loader-w"><span class="loader-text">loading...</span></div>',loadBoxClass:"loadingBox",init:function(){},loadUrl:function(b,a){},showLoadBox:function(d){var e="loadingBox-"+(Math.floor(Math.random(0)*10000));var c=$(d).parent("div,p");var a=$(this.loaderCnt).addClass(this.loadBoxClass).attr("id",e).css({position:"absolute",top:0,left:0,opacity:0,width:c.width()+parseInt(c.css("padding-left"))+parseInt(c.css("padding-right"))+parseInt(c.css("margin-left"))+parseInt(c.css("margin-right")),height:c.height()+parseInt(c.css("padding-top"))+parseInt(c.css("padding-bottom"))+parseInt(c.css("margin-top"))+parseInt(c.css("margin-bottom"))});c.css("position","relative").prepend(a.hide());a.fadeTo(500,1);var b=this;setTimeout(function(){b.hideLoadBox(e)},this.timeout)},hideLoadBox:function(a){if(typeof(a)=="undefined"){$("."+this.loadBoxClass).remove()}else{$("#"+a).remove()}}};if(typeof(contentSelector)==="undefined"){var contentSelector=CubeCMS.contentSelector}function vveShowMessages(a){CubeCMS.Mgs.show(a)}function infoMsg(b,a){CubeCMS.Mgs.info(b,a)}function clearInfoMsg(){CubeCMS.Mgs.clear("info")}function clearErrMsg(){CubeCMS.Mgs.clear("error")}function errMsg(b,a){CubeCMS.Mgs.err(b,a)}function showLoadBox(a,b){CubeCMS.Loader.showLoadBox(a)}function hideLoadBox(){CubeCMS.Loader.hideLoadBox()}function vveLoadImage(a,b){CubeCMS.Images.loadImage(a,b)}function initToolboxEvents(){var a=$("a.toolbox-button");$("div.toolbox-temp").remove();$("div.toolbox").parent("div").css({position:"relative"});$(".toolbox-tool").hover(function(){$(this).addClass("ui-state-highlight");$(this).find("input").addClass("ui-state-highlight")},function(){$(this).removeClass("ui-state-highlight");$(this).find("input").removeClass("ui-state-highlight")});a.hover(function(){$(this).css({"z-index":3});$(this).next("div.toolbox").trigger("showToolbox",[$(this)])},function(){$(this).css({"z-index":10000})});$("div.toolbox").bind("showToolbox",function(c,d){d.parent().addClass("toolbox-active-content");var e=$(this).attr("id")+"-copy";var b;if($("#"+e).length==0){b=$(this).clone(true).attr("id",e).addClass("toolbox-temp");$("body").append(b);b.bind("mouseleave",function(){$(".toolbox-active-content").removeClass("toolbox-active-content");$(this).animate({opacity:0},0,function(){$(this).css({"z-index":-10000}).hide()})})}else{b=$("#"+e)}b.css({opacity:1,top:d.offset().top-2,left:d.offset().left-b.width()+22,width:b.width(),"z-index":10000}).show()});$(document).unbind("scroll");if(typeof document.toolboxTop=="undefined"){document.toolboxTop=30}$(document).scroll(function(){var b=$(this).scrollTop();a.each(function(){var c=$(this).parent();if(c.offset().top<b+document.toolboxTop&&b<c.offset().top+c.height()-document.toolboxTop){$(this).css({position:"fixed",top:document.toolboxTop,left:$(this).offset().left})}else{$(this).css({position:"absolute",top:1,right:1,left:"auto"})}})})}function str2url(c,b,a){return CubeCMS.Tools.str2url(c,a)}function vveCheckUrlKey(a,c,f,d){var b=$(c);var e={key:b.val(),lang:b.attr("lang")};if(typeof d!="undefined"){$.extend(e,d)}$.ajax({type:"POST",url:a,data:e,cache:false,success:function(g){if((f||f!="")&&(typeof f!=="undefined")){if(typeof g.urlkey!=="undefined"){f(g.urlkey)}else{f(null)}}}})}function loadPageLang(a,b){showLoadBox(contentSelector);$(contentSelector).load(a,function(c){var d=a.match(/(l=[a-z]{2})/g);if(d!=null){$(contentSelector).html(c.replace(d[0],""))}hideLoadBox();initToolboxEvents();$(document).scroll()})}$(document).ready(function(){CubeCMS.setup();$(".form-link-lang-container a.form-link-lang").live("click",function(b,a){if(typeof a=="undefined"){a=true}var e=this.lang;$(this).parent("p").find("a").removeClass("form-link-lang-sel");$(this).addClass("form-link-lang-sel");var d=$(this).closest("*:has(p[lang])");$("p[lang]",d).hide();var c=$('p[lang="'+e+'"]',d).show();if(a){c.find("input,textarea,select").focus()}d=$(this).closest("*:has(label[lang])")[0];$("label[lang]",d).hide();$('label[lang="'+e+'"]',d).show();return false});if(typeof document.primaryLang!=="undefined"){$('.form-link-lang-container a[lang="'+document.primaryLang+'"]').trigger("click",[false])}else{$('.form-link-lang-container a[lang="'+document.lang+'"]').trigger("click",[false])}initToolboxEvents();$(".link-external").live("click",function(){window.open(this.href);return false});$("a.toolbox-changelang-button").live("click",function(b){b.preventDefault();loadPageLang(this.href);showLoadBox(".main-content");var a=this.href;$(".main-content").load(a,function(c){var d=a.match(/(l=[a-z]{2})/g);if(d!=null){$(".main-content").html(c.replace(d[0],""))}hideLoadBox();initToolboxEvents();$(document).scroll()});return false});if($.browser.msie){$("[placeholder]").focus(function(){var a=$(this);if(a.val()==a.attr("placeholder")){a.val("");a.removeClass("placeholder")}}).blur(function(){var a=$(this);if(a.val()==""||a.val()==a.attr("placeholder")){a.addClass("placeholder");a.val(a.attr("placeholder"))}}).blur();$("[placeholder]").parents("form").submit(function(){$(this).find("[placeholder]").each(function(){var a=$(this);if(a.val()==a.attr("placeholder")){a.val("")}})})}});