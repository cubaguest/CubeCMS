function vveShowMessages(e){CubeCMS.Msg.show(e)}function infoMsg(e,t){CubeCMS.Msg.info(e,t)}function clearInfoMsg(){CubeCMS.Msg.clear("info")}function clearErrMsg(){CubeCMS.Msg.clear("error")}function errMsg(e,t){CubeCMS.Msg.err(e,t)}function showLoadBox(e,t){CubeCMS.Loader.showLoadBox(e)}function hideLoadBox(){CubeCMS.Loader.hideLoadBox()}function vveLoadImage(e,t){CubeCMS.Images.loadImage(e,t)}function initToolboxEvents(){var e=$("a.toolbox-button");$("div.toolbox-temp").remove();$("div.toolbox").parent("div").css({position:"relative"});$(".toolbox-tool").hover(function(){$(this).addClass("ui-state-highlight");$(this).find("input").addClass("ui-state-highlight")},function(){$(this).removeClass("ui-state-highlight");$(this).find("input").removeClass("ui-state-highlight")});e.hover(function(){$(this).css({"z-index":3});$(this).next("div.toolbox").trigger("showToolbox",[$(this)])},function(){$(this).css({"z-index":1e4})});$("div.toolbox").bind("showToolbox",function(e,t){t.parent().addClass("toolbox-active-content");var n=$(this).attr("id")+"-copy";var r;if($("#"+n).length==0){r=$(this).clone(true).attr("id",n).addClass("toolbox-temp");$("body").append(r);r.bind("mouseleave",function(){$(".toolbox-active-content").removeClass("toolbox-active-content");$(this).animate({opacity:0},0,function(){$(this).css({"z-index":-1e4}).hide()})})}else{r=$("#"+n)}r.css({opacity:1,top:t.offset().top-2,left:t.offset().left-r.width()+22,width:r.width()+5,"z-index":1e4}).show()});$(document).unbind("scroll");if(typeof document.toolboxTop=="undefined"){document.toolboxTop=30}$(document).scroll(function(){var t=$(this).scrollTop();e.each(function(){var e=$(this).parent();if(e.offset().top<t+document.toolboxTop&&t<e.offset().top+e.height()-document.toolboxTop){$(this).css({position:"fixed",top:document.toolboxTop,left:$(this).offset().left})}else{$(this).css({position:"absolute",top:1,right:1,left:"auto"})}})})}function str2url(e,t,n){return CubeCMS.Tools.str2url(e,n)}function vveCheckUrlKey(e,t,n,r){var i=$(t);var s={key:i.val(),lang:i.attr("lang")};if(typeof r!="undefined"){$.extend(s,r)}$.ajax({type:"POST",url:e,data:s,cache:false,success:function(e){if((n||n!="")&&typeof n!=="undefined"){if(typeof e.urlkey!=="undefined"){n(e.urlkey)}else{n(null)}}}})}function loadPageLang(e,t){showLoadBox(contentSelector);$(contentSelector).load(e,function(t){var n=e.match(/(l=[a-z]{2})/g);if(n!=null){$(contentSelector).html(t.replace(n[0],""))}hideLoadBox();initToolboxEvents();$(document).scroll()})}var CubeCMS=CubeCMS||{};CubeCMS={contentSelector:".main-content",lang:null,primaryLang:null,domain:null,baseOpt:{},init:function(e){$.extend(this,e);document.domain=this.domain;document.lang=this.lang;document.primaryLang=this.primaryLang},setup:function(){this.Msg.init();this.Loader.init()}};CubeCMS.Msg={infoBox:null,errBox:null,init:function(){this.infoBox=$("#infoMessages");this.errBox=$("#errMessages")},info:function(e,t){if(e==null)return this;if(typeof t=="undefined")t=true;if(t==true){this.clear("info")}this.infoBox.prepend("<p>"+e+"</p>").slideDown();$("body").scrollTop(this.infoBox.offset().top-50);return this},err:function(e,t){if(e==null)return this;if(typeof t=="undefined")t=true;if(t==true){this.clear("err")}this.errBox.prepend("<p>"+e+"</p>").slideDown();$("body").scrollTop(this.errBox.offset().top-50);return this},show:function(e){this.clear("info");this.clear("error");if(typeof e.infomsg=="object"){for(var t=0;t<e.infomsg.length;t++){this.info(e.infomsg[t],false)}}else if(typeof e.infomsg=="string"){this.info(e.infomsg)}if(typeof e.errmsg=="object"){for(var n=0;n<e.errmsg.length;n++){this.err(e.errmsg[n],false)}}else if(typeof e.infomsg=="string"){this.err(e.errmsg)}},clear:function(e){if(e=="info"){this.infoBox.html(null).hide()}else if(e=="err"||e=="error"){this.errBox.html(null).hide()}return this}};CubeCMS.Tools={str2url:function(e,t){e=e.toUpperCase();e=e.toLowerCase();e=e.replace(/[\u0105\u0104\u00E0\u00E1\u00E2\u00E3\u00E4\u00E5]/g,"a");e=e.replace(/[\u00E7\u010D\u0107\u0106]/g,"c");e=e.replace(/[\u010F]/g,"d");e=e.replace(/[\u00E8\u00E9\u00EA\u00EB\u011B\u0119\u0118]/g,"e");e=e.replace(/[\u00EC\u00ED\u00EE\u00EF]/g,"i");e=e.replace(/[\u0142\u0141]/g,"l");e=e.replace(/[\u00F1\u0148]/g,"n");e=e.replace(/[\u00F2\u00F3\u00F4\u00F5\u00F6\u00F8\u00D3]/g,"o");e=e.replace(/[\u0159]/g,"r");e=e.replace(/[\u015B\u015A\u0161]/g,"s");e=e.replace(/[\u00DF]/g,"ss");e=e.replace(/[\u0165]/g,"t");e=e.replace(/[\u00F9\u00FA\u00FB\u00FC\u016F]/g,"u");e=e.replace(/[\u00FD\u00FF]/g,"y");e=e.replace(/[\u017C\u017A\u017B\u0179\u017E]/g,"z");e=e.replace(/[\u00E6]/g,"ae");e=e.replace(/[\u0153]/g,"oe");e=e.replace(/[\u013E\u013A]/g,"l");e=e.replace(/[\u0155]/g,"r");e=e.replace(/[^a-z0-9\s\'\:\/\[\]-]/g,"");e=e.replace(/[\s\'\:\/\[\]-]+/g," ");e=e.replace(/[ ]/g,"-");e=e.replace(/[\/]/g,"-");if(t==1){var n=e.charAt(0);e=n.toUpperCase()+e.slice(1)}return e},stripHtml:function(e){var t=document.createElement("DIV");t.innerHTML=e;return t.textContent||t.innerText},checkUrlKey:function(e,t,n){var r=$(element);$.ajax({type:"POST",url:e,cache:false,data:{key:r.val(),lang:r.attr("lang")},success:function(e){if(typeof e.urlkey!="undefined"&&$.isFunction(n))n(e.urlkey)}})},contrastColor:function(e){var t=1-(.299*parseInt(e.substring(0,2),16)+.587*parseInt(e.substring(2,4),16)+.114*parseInt(e.substring(4,6),16))/255;if(t<.5){return"#000000"}else{return"#ffffff"}}};CubeCMS.ToolBox={init:function(){}};CubeCMS.ToolBox.Tool={};CubeCMS.Images={slideShowFade:function(e,t){$(e+" .image:gt(0)").hide();setInterval(function(){$(e+" .image:first").fadeOut().next(".image").fadeIn().end().appendTo(e)},t)},loadImage:function(e,t){var n=document.createElement("img");n.onload=function(){if($.isFunction(t)){t.call(n)}};n.src=e}};CubeCMS.Loader={timeout:1e4,loaderCnt:'<div id="loadingBox" class="loadingBox"><div class="loader-w"><span class="loader-text">{MSG}</span></div>',loadBoxClass:"loadingBox",init:function(){},loadUrl:function(e,t){},showLoadBox:function(e,t){if(typeof t=="undefined"){t="loading..."}var n="loadingBox-"+Math.floor(Math.random(0)*1e4);var r=$(e).parent("div,p");var i=$(this.loaderCnt.replace("{MSG}",t)).addClass(this.loadBoxClass).attr("id",n).css({position:"absolute",top:0,left:0,opacity:0,width:r.width()+parseInt(r.css("padding-left"))+parseInt(r.css("padding-right"))+parseInt(r.css("margin-left"))+parseInt(r.css("margin-right")),height:r.height()+parseInt(r.css("padding-top"))+parseInt(r.css("padding-bottom"))+parseInt(r.css("margin-top"))+parseInt(r.css("margin-bottom"))});if(r.css("position")!="absolute"&&r.css("position")!="relative"){r.css("position","relative")}r.prepend(i.hide());i.fadeTo(500,1);var s=this;setTimeout(function(){s.hideLoadBox(n)},this.timeout);return n},hideLoadBox:function(e){if(typeof e=="undefined"){$("."+this.loadBoxClass).remove()}else if(e instanceof jQuery){e.parent("div,p").find("."+this.loadBoxClass).remove()}else{$("#"+e).remove()}}};CubeCMS.Form={addRow:function(e){var t=$(e).closest(".form-input-multiple");var n=t.clone(true);var r=n.find("input");r.attr("id",r.attr("id")+Math.floor(Math.random()*10+1)).attr("name",r.attr("name").replace(/\[.*\]/,"[]")).val("");t.removeClass("form-input-multiple-last").find("a.button-add-multiple-line").hide();t.after(n.hide());n.fadeIn(200,function(){});if(t.closest(".form-controls").find(".form-input-multiple").length>1){t.closest(".form-controls").find("a.button-remove-multiple-line").show()}return false},removeRow:function(e){var t=$(e).closest(".form-input-multiple");var n=t.closest(".form-controls");t.fadeOut(100,function(){if(t.hasClass("form-input-multiple-last")){t.prev().addClass("form-input-multiple-last").find("a.button-add-multiple-line").show();t.prev().addClass("form-input-multiple-last")}$(this).remove();if(n.find(".form-input-multiple").length==1){n.find("a.button-remove-multiple-line").hide()}});return false},addButton:function(e,t){t=$.extend({icon:"refresh",href:window.location+"#",text:null,"class":null,id:null},t);if(!e.parent().hasClass("input-group")){e.wrap($("<div></div>").addClass("input-group"))}var n=$("<a></a>").addClass("input-group-btn").addClass(t.class).prop({href:t.href,id:t.id});if(t.icon!==null){n.append($("<span></span>").addClass("icon").addClass("icon-"+t.icon))}if(t.text!==null){n.html(t.text)}e.parent().append(n)}};if(typeof contentSelector==="undefined"){var contentSelector=CubeCMS.contentSelector}$(document).ready(function(){CubeCMS.setup();$("form .lang-container").on("click","a.link-lang",function(e,t){if(typeof t=="undefined")t=true;var n=this.lang;$(this).parent().find("a").removeClass("link-lang-sel");$(this).addClass("link-lang-sel");var r=$(this).closest("*:has(div[lang])");$("div[lang]",r).hide();var i=$('div[lang="'+n+'"]',r).show();if(t){i.find("input,textarea,select").focus()}r=$(this).closest("*:has(label[lang])")[0];$("label[lang]",r).hide();$('label[lang="'+n+'"]',r).show();return false});if(typeof document.primaryLang!=="undefined"){$('.lang-container a[lang="'+document.primaryLang+'"]').trigger("click",[false])}else{$('.lang-container a[lang="'+document.lang+'"]').trigger("click",[false])}initToolboxEvents();$(".link-external").live("click",function(){window.open(this.href);return false});$("a.toolbox-changelang-button").live("click",function(e){e.preventDefault();loadPageLang(this.href);showLoadBox(".main-content");var t=this.href;$(".main-content").load(t,function(e){var n=t.match(/(l=[a-z]{2})/g);if(n!=null){$(".main-content").html(e.replace(n[0],""))}hideLoadBox();initToolboxEvents();$(document).scroll()});return false});if($.browser.msie){$("[placeholder]").focus(function(){var e=$(this);if(e.val()==e.attr("placeholder")){e.val("");e.removeClass("placeholder")}}).blur(function(){var e=$(this);if(e.val()==""||e.val()==e.attr("placeholder")){e.addClass("placeholder");e.val(e.attr("placeholder"))}}).blur();$("[placeholder]").parents("form").submit(function(){$(this).find("[placeholder]").each(function(){var e=$(this);if(e.val()==e.attr("placeholder")){e.val("")}})})}})