(function(a){function f(b){return a(b).parents("div.smlmenu_root")[0].$settings}function e(b){var c=f(b);var d=a(b).find("a."+c.selectedClass);var e=d.parents("ul");e.reverse();e.each(function(){if(!a(this).hasClass(c.ulClass)){a("div.smlmenu_root").height(a("div.smlmenu_root").height()+a(this).height());a(this).show()}});var g=d.next("ul");if(g.length!=0){a("div.smlmenu_root").height(a("div.smlmenu_root").height()+g.height());g.show()}}function d(){var b=f(this);a(this).parents("div.smlmenu_root").find("a").removeClass(b.hoverClass)}function c(){var b=f(this);a(this).parents("div.smlmenu_root").find("a").removeClass(b.hoverClass);a(this).addClass(b.hoverClass)}function b(){var b=f(this);var c=a(this).next("ul");var d=c.parent("li").parent("ul");d.find("ul").hide();d.find("a").removeClass(b.activeClass);a(this).addClass(b.activeClass);var e=c.height();a(this).parents("ul").each(function(){e+=a(this).height()});a("div.smlmenu_root").animate({height:e},b.showDelay);c.setSubMenuPosition().show();return false}a.fn.smlMenu=function(g){var h=a.extend({},arguments.callee.defaults,g);return this.each(function(){this.$settings=a.extend({},h);var g=a(this).addClass(this.$settings.rootClass).children("ul").addClass(this.$settings.ulClass);g.find("ul").hide();var i=a("a",g);if(this.$settings.image!=null){var j=a("<img />").attr({src:this.$settings.image,alt:""});i.append(j)}i.each(function(){var c=a(this).next("ul");if(a(this).next("ul").length!=0){a(this).addClass("expandable");if(f(this).event!=null){a(this).bind(f(this).event,b)}}});a("a",g).bind("mouseover",c);a("a",g).bind("mouseout",d);e(g)})};a.fn.smlMenu.defaults={showDelay:300,hideDelay:0,event:"click",rootClass:"smlmenu_root",ulClass:"smlmenu_ul_root",selectedClass:"smlmenu_selected",activeClass:"smlmenu_active",openClass:"smlmenu_open",hoverClass:"smlmenu_hover",image:null};a.fn.setSubMenuPosition=function(){return a(this).css({})};a.fn.reverse=[].reverse})(jQuery)